{% extends "./base.html" %}

{% block title %} Edita Contacto {% endblock%}

{% block user%}
    {% if session.usrvalid %}
        <a class="text-white" href="/">Cerrar Sesión</a>
        <span class="text-white" style="padding-left: 40px; padding-right: 20px;">{{session.nombre}}</span>
    {% else %}
        <a class="text-white" href="/">Iniciar Sesión</a>
    {% endif %}    
{% endblock%}

{% block body %}
{% if session.usrvalid %}
{% load static %}
<div class="row">
<form action="/editarContacto/{{session.usrid}}" method="POST">{% csrf_token %}
    <div class="col-md-12">
        <div class="row">
          <div class="col-md-5">
            <h2>{% if contacto.IdContacto %}Edicion de Contacto {% else %}Agrega Contacto {% endif%}
            {% if Gestion %}
                <a href="/gestionContactos/{{cliente.IdCliente}}/{{session.usrid}}"><img src="https://cotizadorhitecpretest.z13.web.core.windows.net/back.png" height="40px" width="40px"></a></h2>
            {% else %}
                <a href="/edicionCliente/{{cliente.IdCliente}}/{{session.usrid}}"><img src="https://cotizadorhitecpretest.z13.web.core.windows.net/back.png" height="40px" width="40px"></a>
            {% endif %}
            </h2>
          </div>
          {% if logData.cant %}
            <div class="col-md-7" style="font-size: 12px; text-align: right; color:blue;">            
                <span>{{logData.cant}} movimiento(s). </span> <span>Última actualización {{logData.fecha|date:'d/m/Y H:i'}} por {{logData.user}}</span>
            </div>
          {%endif%}
        </div>
        <div class="card">
            <div class="row">
                <div class="col-md-3">
                    <div class="card-body">
                        <div class="form-group">
                                <div class="form-group">
                                    <label class="etiqueta">Codigo Cliente</label>
                                    <input type="hidden" name="IdCliente" value="{{cliente.IdCliente}}">
                                    <input type="text" name="claveExterna" value="{{cliente.IdCliente}}" class="form-control form-control-sm disabled" readonly disabled>
                                </div>
                        </div>
                    </div> 
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <div class="form-group">
                            <div class="form-group">
                                <label class="etiqueta"></label>
                                <input type="text" name="namecliente" value="{{cliente.NombreCliente}}" class="form-control form-control-sm disabled" readonly disabled>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-1">
                    <div class="card-body">
                        <div class="form-group">
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <input type="hidden" id="idRegistro" name="idRegistro" value="{{idRegistro}}">
                    <div class='form-group col-md-2'><label class='etiqueta'>IdContacto</label><input type='text' value='{{idRegistro}}' class='form-control form-control-sm' readonly disabled></div>
                    <div class='form-group col-md-3'><label class='etiqueta'>Nombre</label><input type='text'  name='Nombre' value='{{contacto.Nombre}}' class='form-control form-control-sm'></div>
                    <div class='form-group col-md-3'><label class='etiqueta'>SegundoNombre</label><input type='text'  name='SegundoNombre' value='{{contacto.SegundoNombre}}' class='form-control form-control-sm'></div>
                    <div class='form-group col-md-4'><label class='etiqueta'>Apellidos</label><input type='text'  name='Apellidos' value='{{contacto.Apellidos}}' class='form-control form-control-sm'></div>
                    <div class='form-group col-md-2'><label class='etiqueta'>Telefono</label><input type='text'  name='Telefono' value='{{contacto.Telefono}}' class='form-control form-control-sm'></div>
                    <div class='form-group col-md-2'><label class='etiqueta'>TelefonoMovil</label><input type='text'  name='TelefonoMovil' value='{{contacto.TelefonoMovil}}' class='form-control form-control-sm'></div>
                    <div class='form-group col-md-4'><span style="color:red">* </span><label class='etiqueta'>CorreoElectronico</label><input type='text'  name='CorreoElectronico' value='{{contacto.CorreoElectronico}}' class='form-control form-control-sm' required></div>
                    <div class='form-group col-md-4'><label class='etiqueta'>MedioComunicacion</label>
                        <!--input type='text'  name='MedioComunicacion' value='{{contacto.MedioComunicacion}}' class='form-control form-control-sm'></div-->
                        <select name="MedioComunicacion" class="form-control form-control-sm minimal" value="{{contacto.MedioComunicacion}}">
                            {% if contacto.MedioComunicacion %}
                                <option value='{{contacto.MedioComunicacion}}'>{{descrip.dMedioComunicacion}}</option>
                            {% else %}
                                <option value="" disabled selected>Seleccione uno</option>
                            {% endif %}
                            <option value='001'>Mail</option>
                            <option value='002'>Teléfono</option>
                            <option value='003'>WhatsApp</option>                              
                        </select>
                    </div>
                    <!--div class='form-group col-md-5'><label class='etiqueta'>Departamento</label><input type='text'  name='Departamento' value='{{contacto.Departamento}}' class='form-control form-control-sm'></div>
                    <div class='form-group col-md-5'><label class='etiqueta'>Funcion</label><input type='text'  name='Funcion' value='{{contacto.Funcion}}' class='form-control form-control-sm'></div-->
                    <div class='form-group col-md-5'>
                        <label class="etiqueta">Departamento</label>
                        <select name="Departamento" class="form-control form-control-sm minimal" value="{{contacto.Departamento}}">
                            {% if contacto.Departamento %}
                                <option value='{{contacto.Departamento}}'>{{descrip.dDepartamento}}</option>
                            {% else %}
                                <option value="" disabled selected>Seleccione uno</option>
                            {% endif %}
                            <option value='0001'>Dep.compras</option>
                            <option value='0002'>Dep.ventas</option>
                            <option value='0003'>Dep.administración</option>
                            <option value='0004'>Dep.producción</option>
                            <option value='0005'>Dep.gestión calidad</option>
                            <option value='0006'>Secretaría</option>
                            <option value='0007'>Dep.financiero</option>
                            <option value='0008'>Dep.jurídico</option>
                            <option value='0009'>Dep.Recursos Humanos</option>
                            <option value='0010'>Dep.asuntos gen.</option>
                            <option value='0011'>Dep.promoción</option>
                            <option value='0012'>Dep.internacional</option>
                            <option value='0013'>Dep.exportación</option>
                            <option value='0014'>Dep.importación</option>
                            <option value='0015'>Dep.rel.públicas</option>
                            <option value='0016'>Dep.publicidad</option>
                            <option value='0017'>Dep.planificación</option>
                            <option value='0018'>Dep.invest.desar.</option>
                            <option value='0019'>Dep.Desarr.product.</option>
                            <option value='0020'>Oficina comercial</option>
                            <option value='0021'>Dep.servicio</option>
                            <option value='0022'>Soporte técnico</option>
                            <option value='0023'>Departamento de TI</option>
                            <option value='0024'>Departam.Logística</option>
                        </select>
                    </div>
                    <div class='form-group col-md-5'>
                        <label class="etiqueta">Función</label>
                        <select name="Funcion" class="form-control form-control-sm minimal" value="{{contacto.Funcion}}">
                            {% if contacto.Departamento %}
                                <option value='{{contacto.Funcion}}'>{{descrip.dFuncion}}</option>
                            {% else %}
                                <option value="" disabled selected>Seleccione uno</option>
                            {% endif %}
                            <option value='Z001'>Arrento</option>
                            <option value='Z002'>Fnto</option>
                            <option value='Z003'>Tec</option>
                            <option value='Z004'>Ent</option>
                            <option value='Z005'>Comp</option>
                            <option value='Z006'>Fact</option>
                            <option value='Z007'>CxP</option>
                            <option value='Z008'>Tec y Fnto</option>
                            <option value='Z009'>Tec y Arrento</option>
                            <option value='Z010'>Tec y Ent</option>
                            <option value='Z011'>Tec y Comp</option>
                            <option value='Z012'>Tec y Fact</option>
                            <option value='Z013'>Comp y Fact</option>
                            <option value='Z014'>Comp y Ent</option>
                            <option value='Z015'>Arrento y Fact</option>
                            <option value='Z016'>Arrento y Ent</option>
                            <option value='Z017'>Fnto y Fact</option>
                            <option value='Z018'>Fnto y Ent</option>
                            <option value='Z019'>Ent y Fact</option>
                            <option value='Z020'>Tec Comp y Ent</option>
                            <option value='Z021'>Tec Comp y Fact</option>
                            <option value='Z022'>Tec Ent y Fact</option>
                            <option value='Z023'>Arrento Comp y Ent</option>
                            <option value='Z024'>Arrento Comp y Fact</option>
                            <option value='Z025'>Arrento Ent y Fact</option>
                            <option value='Z026'>Arrento Ent y Tec</option>
                            <option value='Z027'>Fnto Comp y Fact</option>
                            <option value='Z028'>Fnto Comp y Ent</option>
                            <option value='Z029'>Fnto Ent y Fact</option>
                            <option value='Z030'>Fnto Ent y Tec</option>
                            <option value='Z031'>Comp Ent y Fact</option>
                            <option value='Z032'>Comp Ent y Tec</option>
                            <option value='Z033'>Comp Fact y Tec</option>
                            <option value='Z034'>Tec Comp Ent Fact</option>
                            <option value='Z035'>Tec Comp Ent Fact y Arrento</option>
                            <option value='Z036'>Tec Comp Ent Fact y Fnto</option>
                            <option value='Z037'>Fnto Comp Ent y Fact</option>
                            <option value='Z038'>Arrento Comp Ent y Fact</option>
                        </select>
                    </div>
                    <div class="form-group col-md-1">
                        <label class="etiqueta"></label>  
                        <div class="form-check">
                            {% if iniCheckbox.Principal %}
                                <input class="form-check-input" type="checkbox" id="Principal" name="Principal" value="{{iniCheckbox.Principal}}" checked>
                            {% else %}
                            <input class="form-check-input" type="checkbox" id="Principal" name="Principal" value="{{iniCheckbox.Principal}}">
                            {% endif %}
                            <label class="etiqueta">Principal</label>
                        </div>                        
                    </div>                      
                    <div class="form-group col-md-1">
                        <label class="etiqueta"></label>  
                        <div class="form-check">
                            {% if iniCheckbox.VIP %}
                                <input class="form-check-input" type="checkbox" id="VIP" name="VIP" value="{{iniCheckbox.VIP}}" checked>
                            {% else %}
                            <input class="form-check-input" type="checkbox" id="VIP" name="VIP" value="{{iniCheckbox.VIP}}">
                            {% endif %}
                            <label class="etiqueta">VIP</label>
                        </div>                        
                    </div>
                    <!--div class="row">
                        <input type="hidden" id="vista" value="{{vista}}">
                        <input type="hidden" id="idRegistro" value="0">
                        <input type="hidden" id="idCodDomFis" value="0">
                        <input type="hidden" id="CodDomFis" value="">
                        <input type="hidden" id="idCodPos" value="{{iniCodPos}}">
                        <input type="hidden" id="iniDistrito" value="{{iniDistrito}}">
                        <div class="form-group col-md-6">                            
                            <input type="hidden" id="idPais" value="{{iniPais.CodeId}}">
                            <input type="hidden" id="Pais" value="{{iniPais.Descrip}}">
                            <span style="color:red">* </span><label class="etiqueta">Pais</label>
                            <select id="PaisRegion" name="PaisRegion" class="form-control form-control-sm minimal" value="{{contacto.PaisRegion}}"></select>
                        </div>
                        <div class="form-group col-md-6">
                            <input type="hidden" id="idRegion" value="{{iniRegion.CodeId}}">
                            <input type="hidden" id="Region" value="{{iniRegion.Descrip}}">
                            <span style="color:red">* </span><label class="etiqueta">Estado</label>
                            <select id="Estado" name="Estado" class="form-control form-control-sm minimal" required></select>
                        </div>
                    </div>
                    {% if dataInt %}
                    <div id="dataNac" class="row" hidden>                
                    {% else %}
                    <div id="dataNac" class="row">
                    {% endif %}
                        <div class="form-group col-md-2">
                            <input type="hidden" id="idCodPos" value="{{iniCodPos}}">
                            <label class="etiqueta">Código Postal</label>
                            <select id="CodigoPostal" name="CodigoPostal" class="form-control form-control-sm minimal"></select>
                        </div>
                        <div class="form-group col-md-5">
                            <label class="etiqueta">Municipio o Alcaldía</label>
                            <input type="text" id="Ciudad" name="Ciudad" value="{{contacto.Ciudad}}" class="form-control form-control-sm">
                        </div>
                        <div class="form-group col-md-5">
                            <input type="hidden" id="iniDistrito" value="{{iniDistrito}}">
                            <span style="color:red">* </span><label class="etiqueta">Colonia</label>
                            <select id="Distrito" name="Distrito" class="form-control form-control-sm minimal" required></select>
                        </div>
                    </div>
                    {% if dataInt %}
                    <div id="dataInt" class="row">                
                    {% else %}
                    <div id="dataInt" class="row" hidden>
                    {% endif %}
                        <div class="form-group col-md-2">
                            <label class="etiqueta">Zona Postal</label>
                            <input type="text" id="IntCodigoPostal" name="IntCodigoPostal" value="{{contacto.CodigoPostal}}" class="form-control form-control-sm" readonly>
                        </div>
                        <div class="form-group col-md-5">
                            <label class="etiqueta">Ciudad</label>
                            <input type="text" id="IntCiudad" name="IntCiudad" value="{{contacto.Ciudad}}" class="form-control form-control-sm">
                        </div>
                        <div class="form-group col-md-5">
                            <label class="etiqueta">Distrito</label>
                            <input type="text" id="IntDistrito" name="IntDistrito" value="{{contacto.Distrito}}" class="form-control form-control-sm">
                        </div>                        
                    </div>
                    <div class='form-group col-md-6'><label class='etiqueta'>Calle</label><input type='text'  name='Calle' value='{{contacto.Calle}}' class='form-control form-control-sm'></div>            
                    <div class='form-group col-md-2'><label class='etiqueta'>Numero</label><input type='text'  name='Numero' value='{{contacto.Numero}}' class='form-control form-control-sm'></div>
                    <div class='form-group col-md-2'><label class='etiqueta'>Edificio</label><input type='text'  name='Edificio' value='{{contacto.Edificio}}' class='form-control form-control-sm'></div>
                    <div class='form-group col-md-2'><label class='etiqueta'>Planta</label><input type='text'  name='Planta' value='{{contacto.Planta}}' class='form-control form-control-sm'></div>
                    <div class='form-group col-md-4'><label class='etiqueta'>PaisExp</label><input type='text'  name='PaisExp' value='{{contacto.PaisExp}}' class='form-control form-control-sm'></div-->
                    
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <span style="color: red; font-size: 11px;">* Campos requeridos</span>
                <div class="form-control d-grid gap-2 col-6 mx-auto">
                    <button class="btn btn-primary text-white btn-block">Guardar</button>
                    {% if Gestion %}
                        <a href="/gestionContactos/{{cliente.IdCliente}}/{{session.usrid}}" class="btn btn-danger text-white">Cancelar</a>
                    {% else %}
                    <a href="/edicionCliente/{{cliente.IdCliente}}/{{session.usrid}}" class="btn btn-danger text-white">Cancelar</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</form>
</div>
{% else %}
<h1>Inicie sesión</h1>
{% endif %}

{% endblock %}